@model IEnumerable<SuperMartApp.Domain.Entities.InventoryTxn>
@{ ViewData["Title"] = "Inventory Ledger"; }
<h2>Inventory Ledger</h2>
<form class="row g-2 mb-3">
  <div class="col-auto"><input class="form-control" name="q" placeholder="Name/SKU/Barcode" value="@ViewBag.Query" /></div>
  <div class="col-auto"><input class="form-control" type="date" name="from" value="@ViewBag.From" /></div>
  <div class="col-auto"><input class="form-control" type="date" name="to" value="@ViewBag.To" /></div>
  <div class="col-auto"><button class="btn btn-primary">Filter</button></div>
</form>
<table class="table table-sm table-striped">
  <thead><tr><th>Date</th><th>ProductId</th><th>BatchId</th><th>Qty</th><th>Type</th><th>Ref</th><th>Cost</th></tr></thead>
  <tbody>
  @foreach (var t in Model) {
    <tr>
      <td>@t.OccurredAt.ToLocalTime()</td><td>@t.ProductId</td><td>@(t.BatchId?.ToString() ?? "-")</td>
      <td>@t.Qty</td><td>@t.TxnType</td><td>@t.RefEntity-@t.RefId</td><td>@t.UnitCost</td>
    </tr>
  }
  </tbody>
</table>
